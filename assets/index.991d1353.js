var e=Object.assign;import{d as t,r as n,o as a,a as i,c as s,b as o,e as l,f as r,t as d,u,g as c,p as g,h as f,i as m,j as p,k as h,w as I,l as C,m as _,n as v,F as D,q as k,s as L,v as b,x as w,y as S,z as R,A as U,B as x,C as E,D as M,E as y,X as A}from"./vendor.cb7830a2.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),i=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,s)=>{const o=new URL(e,a);if(self[t].moduleMap[o])return n(self[t].moduleMap[o]);const l=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){s(new Error(`Failed to import: ${e}`)),i(r)},onload(){n(self[t].moduleMap[o]),i(r)}});document.head.appendChild(r)})),self[t].moduleMap={}}}("assets/");var T=t({name:"site-count",setup(){const e=n(null);return a((()=>{const t=document.createElement("script");t.async=!0,t.src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.value.appendChild(t)})),{siteCountDom:e}}});const O={class:"site-count",ref:"siteCountDom"},z=o("span",{id:"busuanzi_value_site_pv"},null,-1);T.render=function(e,t,n,a,o,l){return i(),s("span",O,[z],512)};var V=t({name:"Header",components:{siteCount:T},setup(){const t=u(),n=c(),a=l({defaultUsername:"未登录",userConfigInfo:r((()=>n.state.userConfigInfo))});return e(e({},d(a)),{router:t,onUserInfoClick:()=>{a.userConfigInfo.loggingStatus||"/config"===t.currentRoute.value.path||t.push("/config")},handleCommand:e=>{switch(e){case"upload":t.push("/");break;case"config":t.push("/config");break;case"management":t.push("/management");break;case"logout":t.push("/config"),n.dispatch("LOGOUT")}},goGitHubRepo:()=>{window.open("https://github.com/XPoet/picx")}})}});const N=I("data-v-021c1452");g("data-v-021c1452");const $={class:"header"},G={class:"header-left"},P=o("div",{class:"logo"},[o("img",{src:"./assets/logo.206d082d.png",alt:"PicX"})],-1),F=o("div",{class:"title"},"PicX",-1),j={class:""},H=C(" 有 "),X=C(" 位小伙伴使用 PicX 图床神器"),B={class:"header-right"},Y={class:"username"},J={key:0,class:"avatar"},q=o("i",{class:"el-icon-user-solid"},null,-1),W={class:"el-dropdown-link"},K={class:"avatar"},Q=C(" 退出登录 ");f();const Z=N(((e,t,n,a,l,r)=>{var d,u;const c=m("siteCount"),g=m("el-tooltip"),f=m("el-dropdown-item"),I=m("el-dropdown-menu"),C=m("el-dropdown");return i(),s("header",$,[o("div",G,[o("div",{class:"brand",onClick:t[1]||(t[1]=t=>e.router.push("/"))},[P,F]),o("div",{class:"website-count",onClick:t[2]||(t[2]=(...t)=>e.goGitHubRepo&&e.goGitHubRepo(...t))},[o(g,{effect:"light",content:"点个 Star 支持一下作者吧(*￣︶￣)",placement:"bottom"},{default:N((()=>[o("i",j,[H,o(c),X])])),_:1})])]),o("div",B,[o("div",{class:"user-info",onClick:t[3]||(t[3]=(...t)=>e.onUserInfoClick&&e.onUserInfoClick(...t))},[o("div",Y,p(e.userConfigInfo.owner?e.userConfigInfo.owner:e.defaultUsername),1),(null==(d=e.userConfigInfo)?void 0:d.avatarUrl)?h("",!0):(i(),s("div",J,[q])),(null==(u=e.userConfigInfo)?void 0:u.avatarUrl)?(i(),s(C,{key:1,trigger:"click",onCommand:e.handleCommand},{dropdown:N((()=>[o(I,null,{default:N((()=>[o(f,{command:"logout"},{default:N((()=>[Q])),_:1})])),_:1})])),default:N((()=>{var t,n;return[o("span",W,[o("span",K,[o("img",{src:null==(t=e.userConfigInfo)?void 0:t.avatarUrl,alt:null==(n=e.userConfigInfo)?void 0:n.owner},null,8,["src","alt"])])])]})),_:1},8,["onCommand"])):h("",!0)])])])}));V.render=Z,V.__scopeId="data-v-021c1452";var ee=t({name:"Nav",setup(){const t=u(),n=c(),i=l({userConfigInfo:r((()=>n.getters.getUserConfigInfo)).value,navList:[{name:"配置",icon:"el-icon-edit-outline",isActive:!1,path:"/config"},{name:"上传",icon:"el-icon-upload2",isActive:!1,path:"/upload"},{name:"管理",icon:"el-icon-box",isActive:!1,path:"/management"},{name:"帮助",icon:"el-icon-chat-dot-round",isActive:!1,path:"/help"}],navClick(e){const n=e.path;if("/management"===n){if(""===this.userConfigInfo.selectedRepos)return _.warning("请选择一个仓库！"),void t.push("/config");if(""===this.userConfigInfo.selectedDir)return _.warning("目录不能为空！"),void t.push("/config")}t.push(n)}}),s=e=>{i.navList.forEach((t=>t.isActive=t.path===e))};return v((()=>t.currentRoute.value),((e,t)=>{s(e.path)})),a((()=>{t.isReady().then((()=>{s(t.currentRoute.value.path)}))})),e({},d(i))}});const te=I("data-v-39452207");g("data-v-39452207");const ne={class:"nav"},ae={class:"nav-list"},ie={class:"nav-content"},se={class:"nav-name"};f();const oe=te(((e,t,n,a,l,r)=>(i(),s("aside",ne,[o("ul",ae,[(i(!0),s(D,null,k(e.navList,(t=>L((i(),s("li",{class:["nav-item flex-center",{active:t.isActive}],onClick:n=>e.navClick(t)},[o("div",ie,[o("i",{class:["nav-icon",t.icon]},null,2),o("span",se,p(t.name),1)])],10,["onClick"])),[[b,"/management"!==t.path||e.userConfigInfo.loggingStatus]]))),256))])]))));ee.render=oe,ee.__scopeId="data-v-39452207";const le=I("data-v-3b9b068c");g("data-v-3b9b068c");const re={key:0,class:"image-box"};f();var de=t({expose:[],setup(e){const t=c(),n=r((()=>t.getters.getImageViewer));return le(((e,t)=>w(n).isShow?(i(),s("div",{key:0,class:"image-viewer",onClick:t[1]||(t[1]=e=>w(n).isShow=!1)},[w(n).url?(i(),s("div",re,[o("img",{class:"img",src:w(n).url},null,8,["src"])])):h("",!0)])):h("",!0)))}});de.__scopeId="data-v-3b9b068c";const ue=I("data-v-4dd951bb");g("data-v-4dd951bb");const ce={class:"top"},ge={class:"bottom"},fe={class:"left"},me={class:"right"},pe={class:"content"};f();var he=t({expose:[],setup(e){const t=c(),n=e=>{t.commit("CHANGE_UPLOAD_AREA_ACTIVE",e.target.classList.contains("active-upload"))};return ue(((e,t)=>{const a=m("router-view");return i(),s(D,null,[o("main",{class:"main-container",onClick:n},[o("div",ce,[o(V)]),o("div",ge,[o("div",fe,[o(ee)]),o("div",me,[o("div",pe,[o(a)])])])]),o(de)],64)}))}});he.__scopeId="data-v-4dd951bb";var Ie=t({name:"App",components:{Main:he}});Ie.render=function(e,t,n,a,o,l){const r=m("Main");return i(),s(r)};let Ce;const _e={},ve=S.create({baseURL:"https://api.github.com",timeout:1e4});ve.interceptors.request.use((e=>{const t=window.localStorage.getItem("accessToken");return t&&(e.headers.common.Authorization=t),e}),(e=>Promise.reject(e))),ve.interceptors.response.use((e=>e),(e=>{if(e.response&&e.response.data){const t=e.response.status,n=e.response.data.message;_.error(`Code: ${t}, Message: ${n}`),console.error(e.response)}else _.error(e);return e.response}));class De{static zerofill(e){return e<10?"0"+e:e}static getYyyyMmDd(e=Date.now()){const t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return`${n}${this.zerofill(a)}${this.zerofill(i)}`}static formatTimestamp(e=Date.now()){const t=new Date(e);let n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),s=t.getHours(),o=t.getMinutes(),l=t.getSeconds();return`${n}-${this.zerofill(a)}-${this.zerofill(i)} ${this.zerofill(s)}:${this.zerofill(o)}:${this.zerofill(l)}`}}var ke,Le;(Le=ke||(ke={})).autoDir="autoDir",Le.newDir="newDir",Le.rootDir="rootDir",Le.reposDir="reposDir";var be=t({name:"Config",setup(){const t=u(),n=c(),a=l({userConfigInfo:r((()=>n.getters.getUserConfigInfo)).value,loggingStatus:r((()=>n.getters.getUserConfigInfo)).value,loading:!1,dirLoading:!1,getUserInfo(){this.userConfigInfo.token?(this.loading=!0,ve.get("/user",{headers:{"Content-Type":"application/json",Authorization:`token ${this.userConfigInfo.token}`}}).then((e=>{e&&200===e.status?(this.saveUserInfo(e),this.getReposList(e.data.repos_url)):this.loading=!1}))):_.warning("Token 不能为空！")},saveUserInfo(e){this.userConfigInfo.loggingStatus=!0,this.userConfigInfo.owner=e.data.login,this.userConfigInfo.name=e.data.name,this.userConfigInfo.email=e.data.email,this.userConfigInfo.avatarUrl=e.data.avatar_url,this.persistUserConfigInfo()},getReposList(e){ve.get(e,{headers:{"Content-Type":"application/json",Authorization:`token ${this.userConfigInfo.token}`}}).then((e=>{if(200===e.status&&e.data.length>0){this.userConfigInfo.reposList=[];for(const t of e.data)t.fork||this.userConfigInfo.reposList.push({value:t.name,label:t.name,desc:t.description});this.loading=!1,this.persistUserConfigInfo()}}))},innerSelectRepos(e){a.getBranchList(e),a.persistUserConfigInfo()},getBranchList(e){this.dirLoading=!0,ve.get(`/repos/${this.userConfigInfo.owner}/${e}/branches`,{headers:{"Content-Type":"application/json",Authorization:`token ${this.userConfigInfo.token}`}}).then((t=>{if(t&&200===t.status){this.dirLoading=!1;const n="master",a="main";t.data.length>0?(t.data.some((e=>e.name===n))?this.userConfigInfo.selectedBranch=n:t.data.some((e=>e.name===a))&&(this.userConfigInfo.selectedBranch=a),this.getDirList(e)):(this.userConfigInfo.selectedBranch=n,this.userConfigInfo.dirMode=ke.newDir,this.userConfigInfo.selectedDir="",this.userConfigInfo.dirList=[])}}))},getDirList(e){this.dirLoading=!0,ve.get(`/repos/${this.userConfigInfo.owner}/${e}/contents`,{headers:{"Content-Type":"application/json",Authorization:`token ${this.userConfigInfo.token}`}}).then((e=>{if(e&&200===e.status&&e.data.length>0){this.userConfigInfo.dirList=[{value:"/",label:"/"}];for(const t of e.data)"dir"===t.type&&this.userConfigInfo.dirList.push({value:t.name,label:t.name});this.persistUserConfigInfo()}this.dirLoading=!1}))},innerDirModeChange(e){switch(e){case ke.rootDir:this.userConfigInfo.selectedDir="/";break;case ke.autoDir:this.userConfigInfo.selectedDir=De.getYyyyMmDd();break;case ke.newDir:case ke.reposDir:this.userConfigInfo.selectedDir=""}this.persistUserConfigInfo()},persistUserConfigInfo(){n.commit("PERSIST_USER_CONFIG_INFO")},reset(){this.loading=!1,this.dirLoading=!1,n.dispatch("LOGOUT")},innerGoUpload(){const e=this.userConfigInfo.selectedDir,n=this.userConfigInfo.dirMode;let a="目录不能为空！";if(""!==e)t.push("/upload");else{switch(n){case ke.newDir:a="请在输入框输入一个新目录！";break;case ke.reposDir:a=`请选择 ${this.userConfigInfo.selectedRepos} 仓库下的一个目录！`}_.warning(a)}}});return v((()=>a.loggingStatus),((e,t)=>{e||(a.loading=!1,a.dirLoading=!1)})),e(e({},d(a)),{dirModeChange:e=>{a.innerDirModeChange(e)},selectRepos:e=>{a.innerSelectRepos(e)},goUpload:()=>{a.innerGoUpload()}})}});const we=I("data-v-57d0d842");g("data-v-57d0d842");const Se={class:"page-container config-page-container"},Re=C(" 确认 Token "),Ue=C("新建目录"),xe=C("根目录"),Ee=C("自动目录"),Me=C(" 重置 "),ye=C("完成配置 ");f();const Ae=we(((e,t,n,a,l,r)=>{const d=m("el-input"),u=m("el-form-item"),c=m("el-button"),g=m("el-form"),f=m("el-option"),I=m("el-select"),_=m("el-radio"),v=m("el-tooltip"),b=m("el-radio-group"),w=R("loading");return i(),s("div",Se,[o(g,{"label-width":"70px","label-position":"right",class:"config-form"},{default:we((()=>[o(u,{label:"Token"},{default:we((()=>[o(d,{modelValue:e.userConfigInfo.token,"onUpdate:modelValue":t[1]||(t[1]=t=>e.userConfigInfo.token=t),clearable:!0},null,8,["modelValue"])])),_:1}),o(u,{class:"operation"},{default:we((()=>[o(c,{plain:"",size:"small",type:"primary",onClick:t[2]||(t[2]=t=>e.getUserInfo())},{default:we((()=>[Re])),_:1})])),_:1})])),_:1}),e.userConfigInfo.token?L((i(),s(g,{key:0,"label-width":"70px","label-position":"right","element-loading-text":"加载中..."},{default:we((()=>[e.userConfigInfo.owner?(i(),s(u,{key:0,label:"用户名"},{default:we((()=>[o(d,{modelValue:e.userConfigInfo.owner,"onUpdate:modelValue":t[3]||(t[3]=t=>e.userConfigInfo.owner=t),readonly:""},null,8,["modelValue"])])),_:1})):h("",!0),e.userConfigInfo.email?(i(),s(u,{key:1,label:"邮箱"},{default:we((()=>[o(d,{modelValue:e.userConfigInfo.email,"onUpdate:modelValue":t[4]||(t[4]=t=>e.userConfigInfo.email=t),readonly:""},null,8,["modelValue"])])),_:1})):h("",!0),e.userConfigInfo.reposList.length?(i(),s(u,{key:2,label:"选择仓库"},{default:we((()=>[o(I,{modelValue:e.userConfigInfo.selectedRepos,"onUpdate:modelValue":t[5]||(t[5]=t=>e.userConfigInfo.selectedRepos=t),filterable:"",style:{width:"100%"},placeholder:"请选择图床仓库...",onChange:e.selectRepos},{default:we((()=>[(i(!0),s(D,null,k(e.userConfigInfo.reposList,((e,t)=>(i(),s(f,{key:t+"_"+e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})):h("",!0)])),_:1},512)),[[w,e.loading]]):h("",!0),e.userConfigInfo.selectedRepos?L((i(),s(g,{key:1,"label-width":"70px","label-position":"right","element-loading-text":"加载中..."},{default:we((()=>[e.userConfigInfo.reposList.length&&e.userConfigInfo.selectedRepos?(i(),s(u,{key:0,label:"目录方式"},{default:we((()=>[o(b,{modelValue:e.userConfigInfo.dirMode,"onUpdate:modelValue":t[6]||(t[6]=t=>e.userConfigInfo.dirMode=t),onChange:e.dirModeChange},{default:we((()=>[o(v,{content:"手动输入一个新目录",placement:"top"},{default:we((()=>[o(_,{label:"newDir"},{default:we((()=>[Ue])),_:1})])),_:1}),o(v,{content:"图片存储在 "+e.userConfigInfo.selectedBranch+" 分支的根目录下",placement:"top"},{default:we((()=>[o(_,{label:"rootDir"},{default:we((()=>[xe])),_:1})])),_:1},8,["content"]),o(v,{content:"根据日期自动创建格式 YYYYMMDD 的目录",placement:"top"},{default:we((()=>[o(_,{label:"autoDir"},{default:we((()=>[Ee])),_:1})])),_:1}),e.userConfigInfo.dirList.length?(i(),s(v,{key:0,content:"选择 "+e.userConfigInfo.selectedRepos+" 仓库下的一个目录",placement:"top"},{default:we((()=>[o(_,{label:"reposDir"},{default:we((()=>[C("选择 "+p(e.userConfigInfo.selectedRepos)+" 仓库目录",1)])),_:1})])),_:1},8,["content"])):h("",!0)])),_:1},8,["modelValue","onChange"])])),_:1})):h("",!0),"autoDir"===e.userConfigInfo.dirMode?(i(),s(u,{key:1,label:"自动目录"},{default:we((()=>[o(d,{modelValue:e.userConfigInfo.selectedDir,"onUpdate:modelValue":t[7]||(t[7]=t=>e.userConfigInfo.selectedDir=t),readonly:""},null,8,["modelValue"])])),_:1})):h("",!0),"rootDir"===e.userConfigInfo.dirMode?(i(),s(u,{key:2,label:"根目录"},{default:we((()=>[o(d,{modelValue:e.userConfigInfo.selectedDir,"onUpdate:modelValue":t[8]||(t[8]=t=>e.userConfigInfo.selectedDir=t),readonly:""},null,8,["modelValue"])])),_:1})):h("",!0),"newDir"===e.userConfigInfo.dirMode?(i(),s(u,{key:3,label:"新建目录"},{default:we((()=>[o(d,{modelValue:e.userConfigInfo.selectedDir,"onUpdate:modelValue":t[9]||(t[9]=t=>e.userConfigInfo.selectedDir=t),onInput:t[10]||(t[10]=t=>e.persistUserConfigInfo()),clearable:"",placeholder:"请输入新建的目录..."},null,8,["modelValue"])])),_:1})):h("",!0),e.userConfigInfo.dirList.length&&"reposDir"===e.userConfigInfo.dirMode?(i(),s(u,{key:4,label:"选择目录"},{default:we((()=>[o(I,{modelValue:e.userConfigInfo.selectedDir,"onUpdate:modelValue":t[11]||(t[11]=t=>e.userConfigInfo.selectedDir=t),filterable:"",style:{width:"100%"},placeholder:"请选择目录...",onChange:e.persistUserConfigInfo},{default:we((()=>[(i(!0),s(D,null,k(e.userConfigInfo.dirList,(e=>(i(),s(f,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})):h("",!0)])),_:1},512)),[[w,e.dirLoading]]):h("",!0),o(g,{"label-width":"70px"},{default:we((()=>[o(u,{class:"operation"},{default:we((()=>[e.userConfigInfo.owner?(i(),s(c,{key:0,plain:"",size:"small",onClick:t[12]||(t[12]=t=>e.reset())},{default:we((()=>[Me])),_:1})):h("",!0),e.userConfigInfo.selectedRepos?(i(),s(c,{key:1,plain:"",size:"small",type:"success",onClick:e.goUpload},{default:we((()=>[ye])),_:1},8,["onClick"])):h("",!0)])),_:1})])),_:1})])}));be.render=Ae,be.__scopeId="data-v-57d0d842";const Te=()=>Number(Math.random().toString().substr(2,5)+Date.now()).toString(36),Oe=e=>{const t=e.lastIndexOf("."),n=e.substr(0,t),a=e.substr(t+1,e.length);return{name:n,hash:Te(),suffix:a}},ze=e=>{const t=e.indexOf(".");return e.substr(0,t)},Ve=e=>/(png|jpg|gif|jpeg|webp|svg\+xml)$/.test(e);function Ne(e,t,n){n&&n(e,t)}const $e=(e,t,n=0)=>{if(!e)return;if(!Ve(e.type))return void _.error("该文件不是图片格式！");const a=new FileReader;a.readAsDataURL(e),a.onload=function(){const a=this.result;if(null===n||a.length<=n)return void Ne(a,e,t);let i=new Image;i.src=a,i.onload=function(){Ne(function(e,t,n){let a=document.createElement("canvas"),i=a.getContext("2d");const s=n,o=n/(e.width/e.height);a.width=s,a.height=o,i.fillStyle="#fff",i.fillRect(0,0,a.width,a.height),i.drawImage(e,0,0,s,o);const l=a.toDataURL(t,.75);return a=i=null,l}(i,e.type,n/1024),e,t),i=null}}},Ge=(e,t,n)=>{const a=`https://cdn.jsdelivr.net/gh/${n.owner}/${n.selectedRepos}@${n.selectedBranch}/${t.path}`,i=decodeURI(t.download_url);switch(e){case"github":return i;case"markdown_gh":return`![${ze(t.name)}](${i})`;case"cdn":return a;case"markdown_cdn":return`![${ze(t.name)}](${a})`}},Pe=e=>{const t=Object.prototype.toString.call(e).split(" ")[1];return t.substring(0,t.length-1).toLowerCase()},Fe=e=>{for(let t in e)switch(Pe(e[t])){case"string":e[t]="";break;case"array":e[t]=[];break;case"number":e[t]=0;break;case"boolean":e[t]=!1}};var je=t({name:"UploadTools",props:{isShowRename:{type:Boolean,default:!1},isShowHashName:{type:Boolean,default:!1},isShowTransformMarkdown:{type:Boolean,default:!1}},setup(t,n){const i=l({setMaxSize:!1,maxSize:200,isRename:!1,isHashRename:!0,isTransformMarkdown:!1,newName:"",innerRename(e){n.emit("rename",{isRename:this.isRename,newName:this.newName})},innerHashRename(e){n.emit("hash-named",e)},innerTransformMarkdown(e){n.emit("transform-markdown",e)},setMaxSizeChange(e){n.emit("is-set-max-size",e)},maxSizeChange(e){n.emit("max-size",e)},innerUploadReset(){n.emit("upload-reset")},innerUploadFile(){n.emit("upload-file")}});a((()=>{o(i.isHashRename),s(i.isRename),i.setMaxSizeChange(i.setMaxSize),i.maxSizeChange(i.maxSize)})),v((()=>t.isShowRename),((e,t)=>{i.isRename=!1,i.newName=e?"xxx":""}));const s=e=>{i.innerRename()},o=e=>{i.innerHashRename(e)};return e(e({},d(i)),{hashRename:o,rename:s,transformMarkdown:e=>{i.innerTransformMarkdown(e)},uploadReset:()=>{i.innerUploadReset()},uploadFile:()=>{i.innerUploadFile()}})}});const He=I("data-v-20cb4b2c");g("data-v-20cb4b2c");const Xe={key:0,class:"tool-item"},Be={key:1,class:"tool-item"},Ye={key:2,class:"tool-item"},Je={key:3,class:"tool-item"},qe={class:"tool-item operation-btn"},We=C("重置 "),Ke=C("上传 ");f();const Qe=He(((e,t,n,a,l,r)=>{const d=m("el-switch"),u=m("el-input"),c=m("el-button");return i(),s("div",null,[e.isShowRename?(i(),s("div",Xe,[o(d,{size:"mini",modelValue:e.isRename,"onUpdate:modelValue":t[1]||(t[1]=t=>e.isRename=t),"active-text":"重命名",onChange:e.rename},null,8,["modelValue","onChange"])])):h("",!0),e.isShowRename&&e.isRename?(i(),s("div",Be,[o(u,{placeholder:"请输入新的名字",modelValue:e.newName,"onUpdate:modelValue":t[2]||(t[2]=t=>e.newName=t),size:"small",onInput:e.rename,clearable:!0},null,8,["modelValue","onInput"])])):h("",!0),e.isShowHashName?(i(),s("div",Ye,[o(d,{size:"mini",modelValue:e.isHashRename,"onUpdate:modelValue":t[3]||(t[3]=t=>e.isHashRename=t),"active-text":"哈希命名",onChange:e.hashRename},null,8,["modelValue","onChange"])])):h("",!0),e.isShowTransformMarkdown?(i(),s("div",Je,[o(d,{size:"mini",modelValue:e.isTransformMarkdown,"onUpdate:modelValue":t[4]||(t[4]=t=>e.isTransformMarkdown=t),"active-text":"外链转换Markdown格式",onChange:e.transformMarkdown},null,8,["modelValue","onChange"])])):h("",!0),o("div",qe,[o(c,{plain:"",size:"small",onClick:e.uploadReset},{default:He((()=>[We])),_:1},8,["onClick"]),o(c,{type:"primary",plain:"",size:"small",onClick:e.uploadFile},{default:He((()=>[Ke])),_:1},8,["onClick"])])])}));je.render=Qe,je.__scopeId="data-v-20cb4b2c";var Ze=t({name:"ImageCard",props:{imageObj:{type:Object,default:()=>{}},isUploaded:{type:Boolean,default:!1}},setup(){const t=c(),n=l({isEnableDeleted:!0,userConfigInfo:r((()=>t.getters.getUserConfigInfo)).value,deleteImage(e){var n,a,i,s,o;e.deleting=!0,ve.delete(`/repos/${null==(n=this.userConfigInfo)?void 0:n.owner}/${null==(a=this.userConfigInfo)?void 0:a.selectedRepos}/contents/${e.path}`,{headers:{"Content-Type":"application/json",Authorization:`token ${null==(i=this.userConfigInfo)?void 0:i.token}`},data:{owner:null==(s=this.userConfigInfo)?void 0:s.owner,repo:null==(o=this.userConfigInfo)?void 0:o.selectedRepos,path:e.path,message:"delete pictures via PicX(https://github.com/XPoet/picx)",sha:e.sha}}).then((n=>{console.log("delete res: ",n),n&&200===n.status?(e.deleting=!1,_.success("删除成功！"),t.dispatch("UPLOADED_LIST_REMOVE",e),t.dispatch("DIR_IMAGE_LIST_REMOVE",e)):e.deleting=!1}))},copyExternalLink(e,t){let n="",a="";switch(e){case"GitHub":n=t.github_url,a=e;break;case"CDN":n=t.cdn_url,a=e;break;case"Markdown":n=t.markdown_cdn,a="Markdown格式的CDN"}let i=document.querySelector(".temp-external-link");i||(i=document.createElement("textarea"),i.setAttribute("class","temp-external-link"),i.style.position="absolute",i.style.top="-99999px",i.style.left="-99999px",document.body.appendChild(i)),i.value=n,i.select(),document.execCommand("copy"),_.success(`${a}外链复制成功！`)},imageView(e){t.commit("IMAGE_VIEWER",{isShow:!0,url:e.cdn_url})}});return e({},d(n))}});const et=I("data-v-530e53da");g("data-v-530e53da");const tt={class:"image-card","element-loading-text":"删除中...","element-loading-background":"rgba(0, 0, 0, 0.6)"},nt={class:"image-box"},at={class:"info-box"},it={class:"image-info"},st={class:"filename"},ot={class:"image-operation"},lt={class:"delete"},rt={class:"copy"};f();const dt=et(((e,t,n,a,l,r)=>{const d=m("el-tooltip"),u=R("loading");return L((i(),s("div",tt,[o("div",nt,[o("img",{src:e.imageObj.cdn_url,onClick:t[1]||(t[1]=t=>e.imageView(e.imageObj))},null,8,["src"])]),o("div",at,[o("div",it,[o("div",st,p(e.imageObj.name),1),o("div",ot,[o("span",lt,[o(d,{content:"删除",placement:"top"},{default:et((()=>[o("i",{class:"el-icon-delete",onClick:t[2]||(t[2]=t=>e.deleteImage(e.imageObj))})])),_:1})]),o("span",rt,[o(d,{content:"复制 GitHub 外链",placement:"top"},{default:et((()=>[o("span",{class:"copy-url",onClick:t[3]||(t[3]=t=>e.copyExternalLink("GitHub",e.imageObj))}," GH ")])),_:1}),o(d,{content:"复制 CDN 外链",placement:"top"},{default:et((()=>[o("span",{class:"copy-url",onClick:t[4]||(t[4]=t=>e.copyExternalLink("CDN",e.imageObj))}," CDN ")])),_:1}),o(d,{content:"复制 Markdown 格式的 CDN 外链",placement:"top"},{default:et((()=>[o("span",{class:"copy-url",onClick:t[5]||(t[5]=t=>e.copyExternalLink("Markdown",e.imageObj))}," MD ")])),_:1})])])])])],512)),[[u,e.imageObj.deleting]])}));Ze.render=dt,Ze.__scopeId="data-v-530e53da";var ut=t({name:"Upload",components:{ImageCard:Ze,UploadTools:je},setup(){const t=u(),a=c(),i=n(null),s=n(null),o=l({userConfigInfo:r((()=>a.getters.getUserConfigInfo)).value,logoutStatus:r((()=>a.getters.getUserLoggingStatus)),uploadedImageList:r((()=>a.getters.getUploadedImageList)),uploadAreaActive:r((()=>a.getters.getUploadAreaActive)),compressSize:200,imgData:{base64Content:"",base64Url:""},filename:{initName:"",prev:"",now:"",name:"",hash:"",suffix:""},fileInfo:{size:0,lastModified:0},setMaxSize:!1,isHashRename:!1,isRename:!1,uploadStatus:{progress:0,uploading:!1},autoUpload:!1,externalLink:{input_github:"",input_cdn:"",github:"",cdn:"",markdown_gh:"",markdown_cdn:""},isTransformMarkdown:!1,onSetMaxSizeChane(e){this.setMaxSize=e},hashRename(e){this.isHashRename=e,this.isHashRename?this.filename.now=`${this.filename.name}.${this.filename.hash}.${this.filename.suffix}`:this.filename.now=`${this.filename.name}.${this.filename.suffix}`},rename(e){const{isRename:t,newName:n}=e;this.filename.name=t?n:this.filename.initName,this.isHashRename?this.filename.now=`${this.filename.name}.${this.filename.hash}.${this.filename.suffix}`:this.filename.now=`${this.filename.name}.${this.filename.suffix}`},onMaxSizeChange(e){this.compressSize=e},resetUploadInfo(){Fe(this.imgData),Fe(this.uploadStatus),Fe(this.filename),Fe(this.externalLink)},uploadImage(){const{token:e,selectedRepos:n,selectedBranch:a,selectedDir:i}=this.userConfigInfo;if(!e)return _.error("请先完成图床配置！"),void t.push("/config");if(!n)return _.error("请选择一个仓库！"),void t.push("/config");if(!i)return _.error("目录不能为空！"),void t.push("/config");if(!this.imgData.base64Content||!this.filename.now)return void _.error("内容不能为空！");if(this.filename.now===this.filename.prev)return void _.error("该图片已上传！");this.uploadStatus.uploading=!0;const s={message:"Upload pictures via PicX(https://github.com/XPoet/picx)",branch:a,content:this.imgData.base64Content};this.userConfigInfo.email&&(s.committer={name:this.userConfigInfo.owner,email:this.userConfigInfo.email}),ve.put(((e,t)=>{let n="";return"/"!==e.selectedDir&&(n=e.selectedDir+"/"),`/repos/${e.owner}/${e.selectedRepos}/contents/${n}${t}`})(this.userConfigInfo,this.filename.now),s,{headers:{"Content-Type":"application/json",Authorization:`token ${e}`}}).then((e=>{e&&201===e.status?(_.success("上传成功！"),this.uploadedHandle(e)):(_.error("上传失败！"),this.uploadStatus.uploading=!1)}))},uploadedHandle(e){this.uploadStatus.progress=100,this.uploadStatus.uploading=!1,this.filename.prev=this.filename.now,this.externalLink.github=Ge("github",e.data.content,this.userConfigInfo),this.externalLink.cdn=Ge("cdn",e.data.content,this.userConfigInfo),this.externalLink.markdown_gh=Ge("markdown_gh",e.data.content,this.userConfigInfo),this.externalLink.markdown_cdn=Ge("markdown_cdn",e.data.content,this.userConfigInfo),this.externalLink.input_github=this.isTransformMarkdown?this.externalLink.markdown_gh:this.externalLink.github,this.externalLink.input_cdn=this.isTransformMarkdown?this.externalLink.markdown_cdn:this.externalLink.cdn;const t={uuid:Te(),dir:this.userConfigInfo.selectedDir,name:e.data.content.name,path:e.data.content.path,sha:e.data.content.sha,github_url:this.externalLink.github,cdn_url:this.externalLink.cdn,markdown_gh:this.externalLink.markdown_gh,markdown_cdn:this.externalLink.markdown_cdn,deleting:!1};this.userConfigInfo.dirList.some((e=>e.value===t.dir))||(a.commit("USER_CONFIG_INFO_ADD_DIR",t.dir),a.dispatch("DIR_IMAGE_LIST_ADD_DIR",t.dir)),a.dispatch("UPLOADED_LIST_ADD",t),a.dispatch("DIR_IMAGE_LIST_ADD_IMAGE",t)},transformMarkdown(e){this.isTransformMarkdown=e,this.externalLink.input_github=e?this.externalLink.markdown_gh:this.externalLink.github,this.externalLink.input_cdn=e?this.externalLink.markdown_cdn:this.externalLink.cdn},copyLink(e){switch(e){case"CDN":s.value.select();break;case"GitHub":i.value.select()}document.execCommand("copy"),_.success(`${e}外链复制成功！`)},getImage(e,t){this.imgData.base64Url=e,this.imgData.base64Content=e.split(",")[1],Fe(this.uploadStatus);const{name:n,hash:a,suffix:i}=Oe(t.name);this.filename.name=n,this.filename.hash=a,this.filename.suffix=i,this.filename.now=this.isHashRename?`${n}.${a}.${i}`:t.name,this.filename.initName=this.filename.name,this.fileInfo.size=t.size,this.fileInfo.lastModified=t.lastModified,this.autoUpload&&this.uploadImage()},onFileChange(e){const t=e.target.files[0];$e(t,((e,t)=>{this.getImage(e,t)}),this.setMaxSize?1024*this.compressSize:null),a.commit("CHANGE_UPLOAD_AREA_ACTIVE",!0)},onDrop(e){const t=e.dataTransfer.files[0];$e(t,((e,t)=>{this.getImage(e,t)}),this.setMaxSize?1024*this.compressSize:null),a.commit("CHANGE_UPLOAD_AREA_ACTIVE",!0)},async onPaste(e){const{url:t,file:n}=await((e,t=204800)=>{if(e.clipboardData&&e.clipboardData.items)return new Promise((n=>{for(let a=0,i=e.clipboardData.items.length;a<i;a++){const i=e.clipboardData.items[a];if("file"===i.kind){const e=i.getAsFile();$e(e,((e,t)=>{n({url:e,file:t})}),t)}}}))})(e,this.setMaxSize?1024*this.compressSize:null);this.getImage(t,n)},getFileSize:e=>(e=>(e/1024).toFixed(2)+" KB")(e),formatLastModified:e=>De.formatTimestamp(e)});v((()=>o.logoutStatus),((e,t)=>{e||o.resetUploadInfo()}));return e(e({},d(o)),{GitHubExternalLinkInput:i,CDNExternalLinkInput:s,onSetMaxSizeChane:e=>{o.onSetMaxSizeChane(e)},onMaxSizeChange:e=>{o.onMaxSizeChange(e)},rename:e=>{o.rename(e)},hashRename:e=>{o.hashRename(e)},resetUploadInfo:()=>{o.resetUploadInfo()},uploadImage:()=>{o.uploadImage()},transformMarkdown:e=>{o.transformMarkdown(e)}})}});const ct=I("data-v-ad3f7456");g("data-v-ad3f7456");const gt={class:"upload-page-container"},ft={key:0,class:"upload-page-left page-container",style:{width:"30%"}},mt={class:"uploaded-item"},pt={class:"row-item"},ht={class:"content-box"},It={key:0,for:"uploader",class:"active-upload"},Ct={key:1,class:"tips active-upload"},_t=o("i",{class:"icon el-icon-upload active-upload"},null,-1),vt=o("div",{class:"text active-upload"},"拖拽、粘贴、或点击此处上传",-1),Dt={key:0,class:"row-item"},kt={class:"content-box"},Lt={class:"upload-status"},bt={class:"file-status"},wt={class:"filename"},St={key:0,class:"upload-tips wait-upload"},Rt=C(" 等待上传 "),Ut=o("i",{class:"el-icon-upload2"},null,-1),xt={key:1,class:"upload-tips uploading"},Et=C(" 正在上传 "),Mt=o("i",{class:"el-icon-loading"},null,-1),yt={key:2,class:"upload-tips uploaded"},At=C(" 上传完成 "),Tt=o("i",{class:"el-icon-circle-check"},null,-1),Ot={class:"file-size info-item"},zt={class:"file-last-modified info-item"},Vt={key:1,class:"row-item"},Nt={class:"content-box"},$t={class:"external-link"},Gt=C("复制GitHub外链"),Pt=C("复制CDN外链 "),Ft={class:"row-item"},jt={class:"content-box"},Ht={class:"upload-tools"},Xt={key:0,class:"repos-dir-info"},Bt={class:"repos-dir-info-item"},Yt=C(" 仓库："),Jt={key:0,class:"repos-dir-info-item"},qt=C(" 分支："),Wt={key:1,class:"repos-dir-info-item"},Kt=C(" 目录：");f();const Qt=ct(((e,t,n,a,l,r)=>{const d=m("ImageCard"),u=m("el-button"),c=m("el-input"),g=m("el-tag"),f=m("UploadTools"),I=R("loading");return i(),s("div",gt,[e.uploadedImageList.length?(i(),s("div",ft,[(i(!0),s(D,null,k(e.uploadedImageList,(e=>(i(),s("div",mt,[o(d,{"image-obj":e,"is-uploaded":!0},null,8,["image-obj"])])))),256))])):h("",!0),o("div",{class:"upload-page-right page-container",style:{width:e.uploadedImageList.length?"70%":"100%"}},[o("div",pt,[o("div",ht,[L(o("div",{class:["upload-area active-upload",{focus:e.uploadAreaActive}],onDragover:t[2]||(t[2]=U((()=>{}),["prevent"])),onDrop:t[3]||(t[3]=U(((...t)=>e.onDrop&&e.onDrop(...t)),["stop","prevent"])),onPaste:t[4]||(t[4]=(...t)=>e.onPaste&&e.onPaste(...t)),"element-loading-text":"上传中...","element-loading-background":"rgba(0, 0, 0, 0.5)"},[e.uploadAreaActive?(i(),s("label",It)):h("",!0),o("input",{id:"uploader",type:"file",onChange:t[1]||(t[1]=(...t)=>e.onFileChange&&e.onFileChange(...t))},null,32),e.imgData.base64Url?h("",!0):(i(),s("div",Ct,[_t,vt])),e.imgData.base64Url?(i(),s("img",{key:2,class:"active-upload",src:e.imgData.base64Url,alt:"Pictures to be uploaded"},null,8,["src"])):h("",!0)],34),[[I,e.uploadStatus.uploading&&100!==e.uploadStatus.progress]])])]),e.imgData.base64Url?(i(),s("div",Dt,[o("div",kt,[o("div",Lt,[o("div",bt,[o("div",wt,p(e.filename.now),1),e.uploadStatus.uploading||100===e.uploadStatus.progress?h("",!0):(i(),s("div",St,[Rt,Ut])),e.uploadStatus.uploading&&100!==e.uploadStatus.progress?(i(),s("div",xt,[Et,Mt])):h("",!0),e.uploadStatus.uploading||100!==e.uploadStatus.progress?h("",!0):(i(),s("div",yt,[At,Tt]))]),o("div",Ot," 图片大小："+p(e.getFileSize(e.fileInfo.size)),1),o("div",zt," 最后修改："+p(e.formatLastModified(e.fileInfo.lastModified)),1)])])])):h("",!0),100===e.uploadStatus.progress?(i(),s("div",Vt,[o("div",Nt,[o("div",$t,[o(c,{class:"external-link-input",size:"mini",modelValue:e.externalLink.input_github,"onUpdate:modelValue":t[6]||(t[6]=t=>e.externalLink.input_github=t),ref:"GitHubExternalLinkInput",readonly:""},{append:ct((()=>[o(u,{onClick:t[5]||(t[5]=t=>e.copyLink("GitHub"))},{default:ct((()=>[Gt])),_:1})])),_:1},8,["modelValue"]),o(c,{class:"external-link-input",size:"mini",modelValue:e.externalLink.input_cdn,"onUpdate:modelValue":t[8]||(t[8]=t=>e.externalLink.input_cdn=t),ref:"CDNExternalLinkInput",readonly:""},{append:ct((()=>[o(u,{onClick:t[7]||(t[7]=t=>e.copyLink("CDN"))},{default:ct((()=>[Pt])),_:1})])),_:1},8,["modelValue"])])])])):h("",!0),o("div",Ft,[o("div",jt,[o("div",Ht,[e.userConfigInfo.selectedRepos?(i(),s("div",Xt,[o("span",Bt,[Yt,o(g,{size:"small"},{default:ct((()=>[C(p(e.userConfigInfo.selectedRepos),1)])),_:1})]),e.userConfigInfo.selectedBranch?(i(),s("span",Jt,[qt,o(g,{size:"small"},{default:ct((()=>[C(p(e.userConfigInfo.selectedBranch),1)])),_:1})])):h("",!0),e.userConfigInfo.selectedDir?(i(),s("span",Wt,[Kt,o(g,{size:"small"},{default:ct((()=>[C(p(e.userConfigInfo.selectedDir),1)])),_:1})])):h("",!0)])):h("",!0),o(f,{onIsSetMaxSize:e.onSetMaxSizeChane,onMaxSize:e.onMaxSizeChange,onRename:e.rename,onHashNamed:e.hashRename,onUploadReset:e.resetUploadInfo,onUploadFile:e.uploadImage,onTransformMarkdown:e.transformMarkdown,"is-show-rename":""!==e.imgData.base64Url&&100!==e.uploadStatus.progress,"is-show-hash-name":""!==e.imgData.base64Url&&100!==e.uploadStatus.progress,"is-show-transform-markdown":!e.uploadStatus.uploading&&100===e.uploadStatus.progress},null,8,["onIsSetMaxSize","onMaxSize","onRename","onHashNamed","onUploadReset","onUploadFile","onTransformMarkdown","is-show-rename","is-show-hash-name","is-show-transform-markdown"])])])])],4)])}));ut.render=Qt,ut.__scopeId="data-v-ad3f7456";var Zt=t({name:"Management",components:{ImageCard:Ze},setup(){const t=c(),n=u(),i=l({userConfigInfo:r((()=>t.getters.getUserConfigInfo)).value,loggingStatus:r((()=>t.getters.getUserLoggingStatus)).value,dirImageList:r((()=>t.getters.getDirImageList)).value,currentDirImageList:[],loadingImageList:!1,initDirImageList(){if(!this.dirImageList.length)return void this.getReposContent();const e=this.userConfigInfo.selectedDir,t=this.dirImageList.find((t=>t.dir===e));t?t.imageList.length>0?this.currentDirImageList=t.imageList:this.getDirContent(e):this.isHasDir(e)&&this.getDirContent(e)},getReposContent(){var e,n;ve.get(`/repos/${null==(e=this.userConfigInfo)?void 0:e.owner}/${null==(n=this.userConfigInfo)?void 0:n.selectedRepos}/contents`,{headers:{"Content-Type":"application/json",Authorization:`token ${this.userConfigInfo.token}`}}).then((e=>{if(console.log("res: ",e),e&&200===e.status&&e.data.length>0){t.dispatch("DIR_IMAGE_LIST_ADD_DIR","/");for(const n of e.data)"dir"===n.type?t.dispatch("DIR_IMAGE_LIST_ADD_DIR",n.name):"file"===n.type&&Ve(Oe(n.name).suffix)&&t.dispatch("DIR_IMAGE_LIST_ADD_IMAGE",this.getImageObject(n,"/"));this.isHasDir(this.userConfigInfo.selectedDir)||(this.userConfigInfo.selectedDir="/"),this.dirChange(this.userConfigInfo.selectedDir)}}))},isHasDir(e){return this.userConfigInfo.dirList.some((t=>t.value===e))},getDirContent(e){var n,a;this.loadingImageList=!0;const i={dir:e,imageList:[]};ve.get(`/repos/${null==(n=this.userConfigInfo)?void 0:n.owner}/${null==(a=this.userConfigInfo)?void 0:a.selectedRepos}/contents/${e}`,{headers:{"Content-Type":"application/json",Authorization:`token ${this.userConfigInfo.token}`}}).then((n=>{if(n&&200===n.status&&n.data.length>0){const a=[];for(const t of n.data)"file"===t.type&&Ve(Oe(t.name).suffix)&&a.push(this.getImageObject(t,e));i.imageList=a,t.dispatch("DIR_IMAGE_LIST_ADD_IMAGE_LIST",i),this.loadingImageList=!1}}))},getImageObject(e,t){if(Ve(Oe(e.name).suffix))return{uuid:Te(),dir:t,name:e.name,path:e.path,sha:e.sha,github_url:Ge("github",e,this.userConfigInfo),cdn_url:Ge("cdn",e,this.userConfigInfo),markdown_gh:Ge("markdown_gh",e,this.userConfigInfo),markdown_cdn:Ge("markdown_cdn",e,this.userConfigInfo),deleting:!1}},dirChange(e){const t=this.dirImageList.find((t=>t.dir===e));t&&t.imageList.length?this.currentDirImageList=t.imageList:this.getDirContent(e)}});return a((()=>{i.initDirImageList()})),v((()=>i.loggingStatus),(e=>{!e&&n.push("/config")})),v((()=>i.dirImageList),(e=>{const t=e.find((e=>e.dir===i.userConfigInfo.selectedDir));t&&(i.currentDirImageList=t.imageList)}),{deep:!0}),e(e({},d(i)),{dirChange:function(e){i.dirChange(e)}})}});const en=I("data-v-dc698aee");g("data-v-dc698aee");const tn={class:"page-container management-page-container"},nn={class:"content-container"},an={class:"top"},sn={class:"status-info-bar"},on={class:"repos-dir"},ln={class:"info-item"},rn=C(" 当前仓库："),dn={class:"info-item"},un=C(" 当前目录："),cn={class:"change-dir"},gn=C(" 切换目录： "),fn={class:"bottom","element-loading-text":"加载中...","element-loading-background":"rgba(0, 0, 0, 0.6)"},mn={class:"image-list"},pn={class:"image-item",style:{width:"220px",height:"230px"}};f();const hn=en(((e,t,n,a,l,r)=>{const d=m("el-tag"),u=m("el-option"),c=m("el-select"),g=m("ImageCard"),f=R("loading");return i(),s("div",tn,[o("div",nn,[o("div",an,[o("div",sn,[o("div",on,[o("span",ln,[rn,o(d,null,{default:en((()=>[C(p(e.userConfigInfo.selectedRepos),1)])),_:1})]),o("span",dn,[un,o(d,null,{default:en((()=>[C(p(e.userConfigInfo.selectedDir),1)])),_:1})])]),o("div",cn,[gn,o(c,{modelValue:e.userConfigInfo.selectedDir,"onUpdate:modelValue":t[1]||(t[1]=t=>e.userConfigInfo.selectedDir=t),placeholder:"请选择",size:"small",onChange:e.dirChange},{default:en((()=>[(i(!0),s(D,null,k(e.userConfigInfo.dirList,(e=>(i(),s(u,{label:e.label,value:e.value},null,8,["label","value"])))),256))])),_:1},8,["modelValue","onChange"])])])]),L(o("div",fn,[o("ul",mn,[(i(!0),s(D,null,k(e.currentDirImageList,(e=>(i(),s("li",pn,[o(g,{"image-obj":e},null,8,["image-obj"])])))),256))])],512),[[f,e.loadingImageList]])])])}));Zt.render=hn,Zt.__scopeId="data-v-dc698aee";const In=[{path:"/",name:"Index",redirect:{name:"Upload"}},{path:"/config",name:"Config",component:be,meta:{title:"图床配置 | PicX 图床神器"}},{path:"/upload",name:"Upload",component:ut,meta:{title:"图片上传 | PicX 图床神器"}},{path:"/management",name:"Management",component:Zt,meta:{title:"图床管理 | PicX 图床神器"}},{path:"/help",name:"Help",component:()=>function(e,t){if(!t)return e();if(void 0===Ce){const e=document.createElement("link").relList;Ce=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in _e)return;_e[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":Ce,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))}((()=>__import__("./help.fb437d65.js")),["./assets/help.fb437d65.js","./assets/help.37c53838.css","./assets/vendor.cb7830a2.js"]),meta:{title:"帮助反馈 | PicX 图床神器"}}],Cn=x({history:E(),routes:In});Cn.beforeEach(((e,t,n)=>{e.meta.title&&(window.document.title=e.meta.title),n()}));const _n={userConfigInfo:(()=>{let e=localStorage.getItem("PICX_CONFIG");return e?JSON.parse(e):{token:"",owner:"",email:"",name:"",avatarUrl:"",selectedRepos:"",reposList:[],selectedBranch:"",dirMode:"",selectedDir:"",dirList:[],loggingStatus:!1}})(),dirImageList:(()=>{let e=localStorage.getItem("PICX_MANAGEMENT");return e?JSON.parse(e):[]})(),uploadedImageList:(()=>{let e=sessionStorage.getItem("PICX_UPLOADED");return e?JSON.parse(e):[]})(),imageViewer:{url:"",isShow:!1},uploadAreaActive:!1};var vn=M({state:()=>_n,mutations:{SET_USER_CONFIG_INFO(e,t){for(const n in t)e.userConfigInfo.hasOwnProperty(n)&&(e.userConfigInfo[n]=t[n])},RESET_USER_CONFIG_INFO(e){Fe(e.userConfigInfo)},USER_CONFIG_INFO_ADD_DIR({commit:e,state:t},n){t.userConfigInfo.dirList.some((e=>e.value===n))||(t.userConfigInfo.dirList.push({label:n,value:n}),e("PERSIST_USER_CONFIG_INFO"))},USER_CONFIG_INFO_REMOVE_DIR({commit:e,state:t},n){const a=t.userConfigInfo.dirList;if(a.some((e=>e.value===n))){const t=a.findIndex((e=>e.value===n));a.splice(t,1),e("PERSIST_USER_CONFIG_INFO")}},PERSIST_USER_CONFIG_INFO(e){e.userConfigInfo.selectedDir=e.userConfigInfo.selectedDir.replace(/\s+/g,"-"),localStorage.setItem("PICX_CONFIG",JSON.stringify(e.userConfigInfo))},IMAGE_VIEWER(e,{url:t,isShow:n}){e.imageViewer.url=t,e.imageViewer.isShow=n},CHANGE_UPLOAD_AREA_ACTIVE(e,t){e.uploadAreaActive=t}},actions:{LOGOUT({commit:e,state:t}){t.userConfigInfo.loggingStatus=!1,e("RESET_USER_CONFIG_INFO"),t.dirImageList=[],t.uploadedImageList=[],localStorage.removeItem("PICX_CONFIG"),localStorage.removeItem("PICX_MANAGEMENT"),sessionStorage.removeItem("PICX_UPLOADED")},DIR_IMAGE_LIST_ADD_IMAGE({state:e,dispatch:t},n){const a=e.dirImageList.find((e=>e.dir===n.dir));a&&(a.imageList.push(n),t("DIR_IMAGE_LIST_PERSIST"))},DIR_IMAGE_LIST_ADD_IMAGE_LIST({state:e,dispatch:t},n){const a=e.dirImageList.find((e=>e.dir===n.dir));a?a.imageList=n.imageList:e.dirImageList.push(n),t("DIR_IMAGE_LIST_PERSIST")},DIR_IMAGE_LIST_ADD_DIR({state:e,dispatch:t},n){if(!e.dirImageList.some((e=>e.dir===n))){const a={dir:n,imageList:[]};"/"===n?e.dirImageList.unshift(a):e.dirImageList.push(a),t("DIR_IMAGE_LIST_PERSIST")}},DIR_IMAGE_LIST_REMOVE_DIR({state:e,dispatch:t},n){if(e.dirImageList.some((e=>e.dir===n))){const a=e.dirImageList.findIndex((e=>e.dir===n));e.dirImageList.splice(a,1),t("DIR_IMAGE_LIST_PERSIST")}},DIR_IMAGE_LIST_REMOVE({state:e,dispatch:t,commit:n},a){if(e.dirImageList.length>0){const i=e.dirImageList.find((e=>e.dir===a.dir));if(i){const e=i.imageList.findIndex((e=>e.uuid===a.uuid));-1!==e&&(i.imageList.splice(e,1),0===i.imageList.length&&(t("DIR_IMAGE_LIST_REMOVE_DIR",i.dir),n("USER_CONFIG_INFO_REMOVE_DIR",i.dir)),t("DIR_IMAGE_LIST_PERSIST"))}}},DIR_IMAGE_LIST_PERSIST({state:e}){localStorage.setItem("PICX_MANAGEMENT",JSON.stringify(e.dirImageList))},UPLOADED_LIST_ADD({state:e,dispatch:t},n){e.uploadedImageList.unshift(n),t("UPLOADED_LIST_PERSIST")},UPLOADED_LIST_REMOVE({state:e,dispatch:t},n){if(e.uploadedImageList.length>0){const a=e.uploadedImageList.findIndex((e=>e.uuid===n.uuid));-1!==a&&(e.uploadedImageList.splice(a,1),t("UPLOADED_LIST_PERSIST"))}},UPLOADED_LIST_PERSIST({state:e}){sessionStorage.setItem("PICX_UPLOADED",JSON.stringify(e.uploadedImageList))}},getters:{getUserConfigInfo:e=>e.userConfigInfo,getUserAvatar:e=>e.userConfigInfo.avatarUrl,getUserName:e=>e.userConfigInfo.name,getUserLoggingStatus:e=>e.userConfigInfo.loggingStatus,getDirImageList:e=>e.dirImageList,getUploadedImageList:e=>e.uploadedImageList,getImageViewer:e=>e.imageViewer,getUploadAreaActive:e=>e.uploadAreaActive}});y(Ie).use(Cn).use(vn).use(A).mount("#app");
